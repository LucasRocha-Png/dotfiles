(()=>{var e={480:(e,t,s)=>{var n=s(928),r=s(896),i=parseInt("0777",8);function a(e,t,s,o){"function"==typeof t?(s=t,t={}):t&&"object"==typeof t||(t={mode:t});var l=t.mode,c=t.fs||r;void 0===l&&(l=i),o||(o=null);var h=s||function(){};e=n.resolve(e),c.mkdir(e,l,(function(s){if(!s)return h(null,o=o||e);if("ENOENT"===s.code){if(n.dirname(e)===e)return h(s);a(n.dirname(e),t,(function(s,n){s?h(s,n):a(e,t,h,n)}))}else c.stat(e,(function(e,t){e||!t.isDirectory()?h(s,o):h(null,o)}))}))}e.exports=a.mkdirp=a.mkdirP=a,a.sync=function e(t,s,a){s&&"object"==typeof s||(s={mode:s});var o=s.mode,l=s.fs||r;void 0===o&&(o=i),a||(a=null),t=n.resolve(t);try{l.mkdirSync(t,o),a=a||t}catch(r){if("ENOENT"===r.code)a=e(n.dirname(t),s,a),e(t,s,a);else{var c;try{c=l.statSync(t)}catch(e){throw r}if(!c.isDirectory())throw r}}return a}},388:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Breakpoints=void 0;const n=s(63),r=s(564),i=s(658),a=s(928);class o{static setUnconditional(e,t,s,r,i){let a="";e.forEach((e=>a+=`${e.line} `)),r.evaluate(`dbstop ${s} ${a}`,(s=>{let r=0;const a=()=>{const s=e[r++],i=s.column?s.column:0;t[i]=new n.Breakpoint(!1)};for(s.forEach((s=>{const i=s.match(o.BP_REGEX);null!==i&&2===i.length?i[1].split(" ").filter((e=>e)).forEach((s=>{const i=e[r++],a=i.column?i.column:0;t[a]=new n.Breakpoint(!0,parseInt(s))})):o.BAD_BP_REGEX.test(s)&&a()}));r!==e.length;)a();i(t)}))}static setConditional(e,t,s,r,i){let a=0;e.forEach((l=>{const c=`dbstop in ${s} at ${l.line} if ${l.condition}`;r.evaluate(c,(s=>{s.forEach((s=>{const r=s.match(o.BP_REGEX);if(null!==r&&2===r.length){const s=r[1],i=e[a++],o=i.column?i.column:0;t[o]=new n.Breakpoint(!0,parseInt(s))}})),a===e.length&&i(t)}))}))}static set(e,t,s,r){const a=new Array;if(0!==e.length){const l=new Array,c=new Array;e.forEach((e=>{e.column=a.length,a.push(new n.Breakpoint(!1,e.line)),void 0!==e.condition&&0!==e.condition.length?l.push(e):c.push(e)}));const h=i.functionFromPath(t);0!==c.length?0!==l.length?o.setUnconditional(c,a,h,s,(e=>{o.setConditional(l,e,h,s,r)})):o.setUnconditional(c,a,h,s,r):o.setConditional(l,a,h,s,r)}else r(a)}static listBreakpointsIn(e,t,s){const n=i.functionFromPath(e),r=new RegExp(`^\\s*breakpoint[s]? in ${n}(?:>\\w+)*? at line[s]? ((?:\\d+ ?)+)$`);let a="";t.evaluate(`dbstatus ${n}`,(e=>{e.forEach((e=>{const t=e.match(r);null!==t&&2===t.length&&(a+=t[1])})),s(a.trim())}))}static clearAllBreakpointsIn(e,t,s){o.listBreakpointsIn(e,t,(n=>{const r=i.functionFromPath(e);t.execute(`dbclear ${r} ${n}`),s()}))}static replaceBreakpoints(e,t,s,n){r.Commands.pushd(s,a.dirname(t),((s,r)=>{o.clearAllBreakpointsIn(t,s,(()=>{o.set(e,t,s,(e=>{r(s),n(e)}))}))}))}}t.Breakpoints=o,o.BP_REGEX=/^\s*(?:ans =)?\s*((?:\d+\s*)+)$/,o.BAD_BP_REGEX=/^\s*ans =\s\[\]\(1x0\)$/},605:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandList=void 0;const n=s(913),r=s(547);class i{constructor(e,t){this.id=e,this.command=t}callback(e){}}class a extends i{constructor(e,t,s){super(e,t),this.cb=s}callback(e){this.cb(e)}}class o extends i{constructor(e,t,s){super(e,t),this.cb=s}callback(e){this.cb(e.split("\n"))}}class l{constructor(e){this._recording=new Array,this._executing=new Array,this._id=0,this._id=e}close(){this._executing=this._recording,this._recording=new Array}process(e){const t=e.split(l.SYNC),s=this._executing,n=Math.min(s.length,t.length);for(let e=0;e!==n;++e)s[e].callback(t[e])}record(e){e.id=this._recording.length,this._recording.push(e)}evaluateAsLine(e,t){this.record(new a(0,e,t))}evaluate(e,t){this.record(new o(0,e,t))}execute(e){this.record(new i(0,e))}executeCommandList(e,t){this.close();const s=this.commands();e.evaluateAsLine(s,(e=>{this.process(e),t(this)}))}commands(){let e="";return this._executing.forEach((t=>e+=`${t.command}\n${r.Runtime.echo(l.SYNC)}`)),e}empty(){return 0===this._recording.length}id(){return this._id}}t.CommandList=l,l.SYNC=`${n.MODULE_NAME}::cl`},564:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0;const n=s(658);class r{static escape(e){return e.replace(/([\\"])/g,"\\$1")}static addFolder(e,t){e.execute(`addpath("${r.escape(t)}")`)}static addFolders(e,t){this.getPathsep(e,(s=>{this.addFolder(e,t.join(s))}))}static getPathsep(e,t){null==this._pathsep?e.evaluateAsLine("pathsep",(e=>{this._pathsep=r.getValue(e),t(this._pathsep)})):t(this._pathsep)}static cwd(e,t){n.validDirectory(t)&&e.execute(`cd "${r.escape(t)}"`)}static getValue(e){return e.replace(r.CLEAN_REGEX,"").trim()}static pwd(e,t){e.evaluateAsLine("pwd",(e=>{t(r.getValue(e))}))}static pushd(e,t,s){r.pwd(e,(n=>{r.cwd(e,t),s(e,(e=>{r.cwd(e,n)}))}))}}t.Commands=r,r.CLEAN_REGEX=/^\s*ans =\s*/},913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eBREAK=t.eERROR=t.eEND=t.eEXIT=t.CELL_RIGHT=t.CELL_LEFT=t.DEFAULT_RIGHT=t.DEFAULT_LEFT=t.FIELDS_SEPARATOR=t.ERROR_EXP=t.EVAL_UNDEF=t.CTX_HOVER=t.CTX_WATCH=t.CTX_CONSOLE=t.SIZE_SEPARATOR=t.COLUMN_ELEMENTS_SEPARATOR=t.ROW_ELEMENTS_SEPARATOR_REGEX=t.ROW_ELEMENTS_SEPARATOR=t.CHUNKS_PREFETCH=t.CHUNKS_SIZE=t.LANGUAGE=t.DEFAULT_EXECUTABLE=t.DEBUGGER_TYPE=t.MODULE_NAME=void 0,t.MODULE_NAME="vsc-octave-debugger",t.DEBUGGER_TYPE="OctaveDebugger",t.DEFAULT_EXECUTABLE="octave-cli",t.LANGUAGE="matlab",t.CHUNKS_SIZE=100,t.CHUNKS_PREFETCH=1,t.ROW_ELEMENTS_SEPARATOR="  ",t.ROW_ELEMENTS_SEPARATOR_REGEX=/  +/,t.COLUMN_ELEMENTS_SEPARATOR="\n",t.SIZE_SEPARATOR="x",t.CTX_CONSOLE="repl",t.CTX_WATCH="watch",t.CTX_HOVER="hover",t.EVAL_UNDEF="undefined",t.ERROR_EXP="error:",t.FIELDS_SEPARATOR=t.ROW_ELEMENTS_SEPARATOR,t.DEFAULT_LEFT="(",t.DEFAULT_RIGHT=")",t.CELL_LEFT="{",t.CELL_RIGHT="}",t.eEXIT="exit",t.eEND="end",t.eERROR="error",t.eBREAK="break"},872:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Expression=void 0;const n=s(851),r=s(913);class i{static evaluate(e,t,s,n){if(s===r.CTX_CONSOLE)t.execute(e),n("",0);else if(i.valid(e))if(""!==e){const a=i.parseName(e);i.type(a,t,((o,l)=>{void 0===o&&void 0===l?a.includes(":")?i.loadAsVariable(e,t,n):n(r.EVAL_UNDEF,0):s===r.CTX_HOVER||s===r.CTX_WATCH?i.handleHover(e,t,o,l,n):i.forceEvaluate(e,t,n)}))}else n(r.EVAL_UNDEF,0)}static valid(e){return!e.startsWith("'")&&":"!==e}static handleHover(e,t,s,n,r){void 0===n||"file"!==n&&"function"!==n?i.loadAsVariable(e,t,r):r(s,0)}static loadAsVariable(e,t,s){var a;const o=n.Variables.getReference(e);0==o?n.Variables.loadVariable(e,t,(a=>{if(null===a){if(e.includes(":"))return void s(r.EVAL_UNDEF,0);n.Variables.getSize(e,t,(a=>{0===a.length?s(r.EVAL_UNDEF,0):n.Variables.loadable(a)?i.forceEvaluate(e,t,s):s(a.join(r.SIZE_SEPARATOR),0)}))}else s(a.value(),0!==a.indexedVariables()?a.reference():0)})):s(null===(a=n.Variables.getByReference(o))||void 0===a?void 0:a.value(),o)}static forceEvaluate(e,t,s){t.evaluateAsLine(e,(t=>{s(n.Variables.removeName(e,t),0)}))}static parseName(e){const t=e.match(i.NAME_REGEX);return null!==t?t[1]:e}static type(e,t,s){const n=new RegExp(`^.*'${e}' is (?:a|the) (?:built-in )?(\\S+).*$`);let r,i;t.evaluate(`which ${e}`,(e=>{e.forEach((e=>{const t=e.match(n);null!==t?(r=e,i=t[1]):void 0===r&&0!==e.length&&(r="")})),s(r,i)}))}}t.Expression=i,i.NAME_REGEX=/^([_A-Za-z]\w*).*$/},861:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=s(63),i=s(602),a=s(913),o=s(547),l=s(388),c=s(872),h=s(619),u=s(851),d=s(808),p=s(956),_=s(436),m=s(633),g=s(13),E=s(77),b=s(304),R=s(292),f=s(283),v=s(697),S=s(961),y=s(335),C=s(88),T=s(796),A=s(42),L=s(658),x=s(928),w=s(605);class I extends r.LoggingDebugSession{constructor(){super(),this._stepCount=0,this._breakpointsCallbacks=new Array,this._configurationDone=!1,this._stackManager=new h.StackFramesManager,this.setDebuggerLinesStartAt1(!0),this.setDebuggerColumnsStartAt1(!0),this.setupVariables()}setupVariables(){u.Variables.register(new f.Range),u.Variables.register(new p.Scalar),u.Variables.register(new E.SparseMatrix),u.Variables.register(new b.ComplexDiagonalMatrix),u.Variables.register(new g.Matrix),u.Variables.register(new R.LazyIndex),u.Variables.register(new v.Struct),u.Variables.register(new S.ScalarStruct),u.Variables.register(new y.ClassDef),u.Variables.register(new m.String),u.Variables.register(new _.Bool),u.Variables.register(new C.Function),u.Variables.register(new T.Cell),u.Variables.registerFallback(new d.UnknownType)}sendTerminatedEvent(){this.sendEvent(new r.TerminatedEvent)}sendBreakEvent(){this.sendEvent(new r.StoppedEvent("breakpoint",I.THREAD_ID)),this._stepping=!1}setupRuntime(e,t,s,n,r,l,c){this._runtime||(i.OctaveLogger.logToConsole=this._isServer,this._runtime=new o.Runtime(e,t,s,n,r,l,c),this.runtimeConnected()?(this._runtime.on(a.eEXIT,(()=>this.sendTerminatedEvent())),this._runtime.on(a.eEND,(()=>this.sendTerminatedEvent())),this._runtime.on(a.eERROR,(()=>this.sendTerminatedEvent())),this._runtime.on(a.eBREAK,(()=>this.sendBreakEvent()))):i.OctaveLogger.warn(`Could not connect to '${e}'! Check path.`))}runtimeConnected(){return this._runtime.connected()}initializeRequest(e,t){this.sendEvent(new r.InitializedEvent),e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportsConditionalBreakpoints=!0,e.body.supportsHitConditionalBreakpoints=!0,e.body.supportsSetVariable=!0,e.body.supportsStepBack=!1,e.body.supportTerminateDebuggee=!0,this.sendResponse(e)}disconnectRequest(e,t){this._runtime.disconnect(),this.sendResponse(e)}configurationDoneRequest(e,t){super.configurationDoneRequest(e,t),this._configurationDone=!0,this._runCallback&&this._runCallback()}static getSourceFolders(e){let t=[],s=this.val(e.sourceFolder,"");""!==s&&t.push(s);let n=x.dirname(e.program);return!t.some((e=>e===n))&&L.validDirectory(n)&&t.push(n),t}static getWorkingDirectory(e){if(void 0!==e.workingDirectory&&L.validDirectory(e.workingDirectory))return e.workingDirectory;const t=x.dirname(e.program);return L.validDirectory(t)?t:void 0!==e.sourceFolder&&L.validDirectory(e.sourceFolder)?e.sourceFolder:""}static val(e,t){return null!=e?e:t}launchRequest(e,t){return n(this,void 0,void 0,(function*(){i.OctaveLogger.setup(t.verbose,t.logFilename),u.Variables.evaluateAns=I.val(t.evaluateAns,!1),void 0!==t.splitFieldnamesOctaveStyle&&S.ScalarStruct.setSplitStyle(t.splitFieldnamesOctaveStyle),void 0!==t.prefetchCount&&u.Variables.setChunkPrefetch(t.prefetchCount),this.setupRuntime(I.val(t.octave,a.DEFAULT_EXECUTABLE),I.val(t.octaveArguments,[]),I.val(t.octaveEnvironment,{}),I.getSourceFolders(t),I.getWorkingDirectory(t),I.val(t.autoTerminate,!0),I.val(t.shell,!0)),this.runtimeConnected()&&(this.runSetBreakpoints(),this._configurationDone?this._runtime.start(t.program):this._runCallback=()=>{this._runtime.start(t.program)}),this.sendResponse(e)}))}runSetBreakpoints(){if(this._runtime&&0!==this._breakpointsCallbacks.length){const e=new w.CommandList(this._stepCount);this._breakpointsCallbacks.forEach((t=>{t(e)})),this._breakpointsCallbacks.length=0,this.executeCommandList(e,(()=>{}))}}handleInvalidBreakpoints(e,t){if(void 0!==t.breakpoints){const s=t.breakpoints.map((e=>({verified:!1,source:t.source,line:e.line})));e.body={breakpoints:s},this.sendResponse(e)}}setBreakPointsRequest(e,t){if(!L.isMatlabFile(t.source))return this.handleInvalidBreakpoints(e,t);const s=s=>{const n=t.breakpoints;if(void 0!==n&&void 0!==t.source.path){const r=t.source.path;l.Breakpoints.replaceBreakpoints(n,r,s,(t=>{e.body={breakpoints:t},this.sendResponse(e)}))}else this.sendResponse(e)};if(this._runtime){const e=new w.CommandList(this._stepCount);s(e),this.executeCommandList(e,(()=>{}))}else this._breakpointsCallbacks.push(s)}threadsRequest(e){e.body={threads:[new r.Thread(I.THREAD_ID,`thread ${I.THREAD_ID}`)]},this.sendResponse(e)}stackTraceRequest(e,t){const s="number"==typeof t.startFrame?t.startFrame:0,n=s+("number"==typeof t.levels?t.levels:1e3);this.clear(),this._stackManager.get(s,n,this._runtime,(t=>{0!=t.length||this._runtime.autoTerminate()||t.push(new r.StackFrame(1,"at top level")),e.body={stackFrames:t,totalFrames:t.length},this.sendResponse(e)}))}scopesRequest(e,t){this._stackManager.selectStackFrame(t.frameId,this._runtime,(()=>{const t=new A.Scope(""),s=new A.Scope("global");e.body={scopes:[new r.Scope("local",t.reference(),!1),new r.Scope(s.name(),s.reference(),!1)]},this.sendResponse(e)}))}variablesRequest(e,t){const s=t=>{t.sort(((e,t)=>{const s=e.basename().toUpperCase(),n=t.basename().toUpperCase();return s<n?-1:s>n?1:0}));const s=t.map((e=>({name:e.name(),type:e.extendedTypename(),value:e.value(),variablesReference:e.reference(),namedVariables:e.namedVariables(),indexedVariables:e.indexedVariables()})));e.body={variables:s},this.sendResponse(e)},n=t.count||0,r=t.start||0,i=new w.CommandList(this._stepCount);u.Variables.listByReference(t.variablesReference,i,r,n,s),this.executeCommandList(i,(()=>{s(I.EMPTY_VARS)}))}setVariableRequest(e,t){u.Variables.setVariable(t.name,t.value,this._runtime,(t=>{e.body={value:t},this.sendResponse(e)}))}evaluateRequest(e,t){const s=(t,s)=>{if(0!==s){const n=u.Variables.getByReference(s);e.body={result:t,variablesReference:s,namedVariables:null==n?void 0:n.namedVariables(),indexedVariables:null==n?void 0:n.indexedVariables()}}else e.body={result:t,variablesReference:0};this.sendResponse(e)},n=()=>c.Expression.evaluate(t.expression,this._runtime,t.context,s);void 0!==t.frameId?this._stackManager.selectStackFrame(t.frameId,this._runtime,n):n()}stepWith(e){this._stepping=this._runtime.autoTerminate(),++this._stepCount,this._runtime.evaluateAsLine(e,(e=>{i.OctaveLogger.log(e),this._stepping&&(this._stepping=!1,this._runtime.evaluateAsLine("dbwhere",(e=>{/at top level/.test(e)&&this.sendTerminatedEvent()})))}))}continueRequest(e,t){this._runtime.execute("dbcont"),this.sendResponse(e)}nextRequest(e,t){this.stepWith("dbstep"),this.sendResponse(e)}stepInRequest(e,t){this.stepWith("dbstep in"),this.sendResponse(e)}stepOutRequest(e,t){this.stepWith("dbstep out"),this.sendResponse(e)}pauseRequest(e,t){i.OctaveLogger.warn("Pausing..."),this._runtime.pause(),this.sendResponse(e)}clear(){u.Variables.clearReferences(),this._stackManager.clear()}executeCommandList(e,t){const s=this,n=e=>{e.empty()||(e.id()===s._stepCount?e.executeCommandList(s._runtime,n):t())};n(e)}}I.THREAD_ID=1,I.EMPTY_VARS=new Array,r.DebugSession.run(I)},602:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OctaveLogger=void 0;const n=s(63),r=s(658);class i{static shouldOutput(e){return i.outputEnabled&&0!==e.trim().length}static setup(e,t){const s=e?n.Logger.LogLevel.Verbose:n.Logger.LogLevel.Log;i.outputEnabled=!0,void 0!==t?n.logger.setup(s,`${t}${r.timestamp()}.txt`,!0):n.logger.setup(s,!1)}static verbose(e){this.shouldOutput(e)&&(i.logToConsole&&console.log(e),n.logger.verbose(e))}static log(e){this.shouldOutput(e)&&(i.logToConsole&&console.log(e),n.logger.log(e))}static warn(e){this.shouldOutput(e)&&(i.logToConsole&&console.warn(e),n.logger.warn(e))}static error(e){this.shouldOutput(e)&&(i.logToConsole&&console.error(e),n.logger.error(e))}static debug(e){i.verbose(e)}}t.OctaveLogger=i,i.logToConsole=!1,i.outputEnabled=!0},547:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Runtime=void 0;const n=s(602),r=s(317),i=s(785),a=s(434),o=s(913),l=s(658),c=s(564);var h,u;!function(e){e[e.NOT_CONSUMING=0]="NOT_CONSUMING",e[e.BEGUN_CONSUMING=1]="BEGUN_CONSUMING",e[e.ENDED_CONSUMING=2]="ENDED_CONSUMING"}(h||(h={})),function(e){e[e.FULL_MATCH=0]="FULL_MATCH",e[e.STATUS=1]="STATUS",e[e.CMD_NUMBER=2]="CMD_NUMBER",e[e.LENGTH=3]="LENGTH"}(u||(u={}));class d extends a.EventEmitter{constructor(e,t,s,n,r,i,a){super(),this._inputHandler=new Array,this._stderrHandler=new Array,this._commandNumber=0,this._processName=e,this._autoTerminate=i,this._arguments=t,this._environment=s,this._shell=a,this.connect(),this.connected()&&(c.Commands.addFolders(this,n),c.Commands.cwd(this,r)),this.addStderrHandler((e=>this.checkForBreaks(e)))}static createCommand(e,t){const s=new Array(u.LENGTH);s[u.CMD_NUMBER]=`${d.SEP}${t}`,s[u.STATUS]=`${d.SEP}${h.BEGUN_CONSUMING}`;const n=d.echo(`${d.SYNC}${s.join("")}`);return s[u.STATUS]=`${d.SEP}${h.ENDED_CONSUMING}`,`${n}${e}\n${d.echo(`${d.SYNC}${s.join("")}`)}`}static split(e){return e.split(this.PROMPT).filter((e=>e))}connect(){n.OctaveLogger.debug(`Runtime: connecting to '${this._processName}'.`);let e={env:Object.assign(process.env,this._environment),shell:this._shell};this._process=r.spawn(this._processName,this._arguments,e),this.connected()&&(this._processStdout=i.createInterface({input:this._process.stdout,terminal:!1,crlfDelay:1/0}),this._processStderr=i.createInterface({input:this._process.stderr,terminal:!1,crlfDelay:1/0}),this._process.on("close",(e=>{this.onExit(e)})),this._process.on("error",(e=>{this.onError(e)})),this._processStdout.on("line",(e=>{this.onStdout(e)})),this._processStderr.on("line",(e=>{this.onStderr(e)})))}isConsumed(e){let t=h.NOT_CONSUMING;for(;0!==this._inputHandler.length&&(t=this._inputHandler[0](e),t===h.ENDED_CONSUMING);)this._inputHandler.shift();return t!==h.NOT_CONSUMING}isSync(e){return d.SYNC_REGEX.test(e)}onStdout(e){d.split(e).forEach((e=>{this.terminated(e)||this.isConsumed(e)||this.isSync(e)||n.OctaveLogger.log(e)}))}onStderr(e){this._stderrHandler.some((t=>t(e))),e.startsWith(o.ERROR_EXP)?n.OctaveLogger.error(e):n.OctaveLogger.warn(e)}onExit(e){const t=`Runtime: ${this._processName} exited with code: ${e}`;0!==e&&null!=e?n.OctaveLogger.error(t):n.OctaveLogger.debug(t),this.emit(o.eEXIT)}onError(e){let t=e.toString();this._process.connected||(t+=`\nCould not connect to '${this._processName}'.`,this.emit(o.eEXIT)),this._process.killed&&(t+=`\nProcess '${this._processName}' was killed.`,this.emit(o.eEXIT)),n.OctaveLogger.debug(t),this.autoTerminate()&&this.emit(o.eERROR)}terminated(e){return!!d.TERMINATOR_REGEX.test(e)&&(n.OctaveLogger.debug(`Runtime: program ${this._program} exited normally.`),this.autoTerminate()?this.emit(o.eEND):this.emit(o.eBREAK),!0)}checkForBreaks(e){return!!/^stopped in .*? at line \d+.*$/.test(e)&&(this.emit(o.eBREAK),!0)}connected(){return void 0!==this._process.pid}disconnect(){n.OctaveLogger.debug("Killing Runtime."),this.execute("quit"),this._process.kill("SIGKILL")}pause(){n.OctaveLogger.debug("Pausing Runtime."),this._process.kill("SIGINT")}start(e){this._program=e;const t=d.echo(d.TERMINATOR);0!=l.functionFromPath(e).length?this.execute(`${l.functionFromPath(e)};${t}`):this.execute(`${t}`)}addStderrHandler(e){this._stderrHandler.push(e)}evaluateAsLine(e,t){this.evaluate(e,(e=>{t(e.join("\n"))}))}evaluate(e,t){let s=this._commandNumber,r=[],i=h.NOT_CONSUMING;this._inputHandler.push((e=>{const a=e.match(d.SYNC_REGEX);if(null!==a&&a.length===u.LENGTH){const e=parseInt(a[u.CMD_NUMBER]);if(e>s)return h.ENDED_CONSUMING;if(e<s)return h.NOT_CONSUMING;i=parseInt(a[u.STATUS]),i===h.ENDED_CONSUMING&&(t(r),n.OctaveLogger.debug(r.join("\n")))}else i===h.BEGUN_CONSUMING&&r.push(e);return i})),this.execute(d.createCommand(e,s))}execute(e){n.OctaveLogger.debug(`${this._processName}:${this._commandNumber}> ${e}`),this._process.stdin.write(`${e}\n`),++this._commandNumber}autoTerminate(){return this._autoTerminate}static echo(e){return` printf("\\n${e}\\n");`}}t.Runtime=d,d.PROMPT=/(?:debug|octave:\d+)> /,d.SEP="::",d.SYNC=o.MODULE_NAME,d.SYNC_REGEX=new RegExp(`${d.SYNC}${d.SEP}(\\d+)${d.SEP}(\\d+)`),d.TERMINATOR=`${d.SYNC}${d.SEP}end`,d.TERMINATOR_REGEX=new RegExp(d.TERMINATOR)},619:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StackFramesManager=void 0;const n=s(602),r=s(63);class i{constructor(){this._frame=0}clear(){this._frame=0}selectStackFrame(e,t,s){if(e===this._frame)s();else{const n=t=>{this.vadidateTransition(t,e),s()};e<this._frame?t.evaluate("dbdown "+(this._frame-e),n):t.evaluate("dbup "+(e-this._frame),n)}}vadidateTransition(e,t){0!==e.length?e[0].match(i.TRANSITION_REGEX)?this._frame=t:n.OctaveLogger.warn(`vadidateTransition:unknown output[0] "${e[0]}"!`):n.OctaveLogger.warn(`vadidateTransition:output.length: ${e.length}!`)}get(e,t,s,n){const a=new Array;s.evaluate("dbstack;",(e=>{e.forEach((e=>{const t=e.match(i.STACK_REGEX);if(null!==t&&t.length>1){const e=t[t.length-3],s=void 0!==e?e:t[1],n=a.length,i=new r.Source(s,t[t.length-1]),o=parseInt(t[t.length-2]),l=new r.StackFrame(n,s,i,o);a.push(l)}})),n(a)}))}}t.StackFramesManager=i,i.TRANSITION_REGEX=/^\s*(?:stopped in.*)|(?:at top level)$/,i.STACK_REGEX=/^\s*(?:-->)?\s*(\w+)(?:>(\S+))*? at line (\d+) \[(.*)\]$/},441:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interval=void 0;class s{constructor(e=0,t=0){this._min=0,this._max=0,this._min=Math.min(e,t),this._max=t}intersect(e){return new s(Math.max(e.min(),this.min()),Math.min(e.max(),this.max()))}contains(e){return this.min()<=e&&e<=this.max()}contigous(e){return this.contains(e.min())||this.contains(e.max())}expandWith(e){this._min=Math.min(this._min,e._min),this._max=Math.max(this._max,e._max)}min(){return this._min}max(){return this._max}size(){return this.max()-this.min()}empty(){return this.max()===this.min()}}t.Interval=s},658:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=t.validDirectory=t.isMatlabFile=t.functionFromPath=void 0;const n=s(928),r=s(896),i=".m",a=new RegExp(`(\\+.+[\\${n.sep}]?)*$`);function o(e,t,s="0"){let n=e.toString();if(n.length<t){const e=t-n.length;n=(s.repeat(e)+n).substr(-t)}return n}t.functionFromPath=e=>{if(e.endsWith(i)){const s=n.parse(e);var t=s.name;const r=s.dir.match(a);return null!==r&&2===r.length&&void 0!==r[1]&&(t=`${r[1].substring(1).replace(`${n.sep}+`,".")}.${t}`),t}return e},t.isMatlabFile=e=>void 0!==e.path?e.path.endsWith(i):void 0!==e.name&&e.name.endsWith(i),t.validDirectory=e=>{try{if(void 0!==e&&""!==e&&"."!==e)return r.accessSync(e,r.constants.F_OK),!0}catch(e){}return!1},t.timestamp=()=>{const e=new Date;return`${e.getFullYear()}${o(e.getMonth(),2)}${o(e.getDate(),2)}_${o(e.getHours(),2)}${o(e.getMinutes(),2)}${o(e.getSeconds(),2)}`}},436:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bool=void 0;const n=s(956);class r extends n.Scalar{constructor(e="",t=""){super(e,t)}typename(){return"bool"}loads(e){return e===this.typename()}createConcreteType(e,t){return new r(e,t)}}t.Bool=r},796:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;const n=s(913),r=s(851),i=s(13);class a extends i.Matrix{constructor(e="",t="",s=[],n=[],r=!1,i=a.CELL_TYPENAME){super(e,t,s,n,r,i)}typename(){return a.CELL_TYPENAME}loads(e){return e===this.typename()}createConcreteType(e,t,s,n,r,i){return new a(e,t,s,n,r,i)}loadNew(e,t,s,i){r.Variables.getSize(e,s,(s=>{const r=s.join(n.SIZE_SEPARATOR),a=this.createConcreteType(e,r,s,[],!1,t);i(a)}))}loacChild(e,t,s,i){const o=this.fixIndices(t,s);if(0===o.free.length){const t=this.basename()+this.makeIndexing(o.free,o.fixed,n.CELL_LEFT,n.CELL_RIGHT);r.Variables.loadVariable(t,e,i)}else{const e=o.free.join(n.SIZE_SEPARATOR);i(this.createConcreteType(this.basename(),e,o.free,o.fixed,!1,a.CELL_TYPENAME))}}loadChildrenRange(e,t,s,n){const r=new Array,i=this.freeIndices(),a=this.fixedIndices(),o=i.slice(0,i.length-1);for(let i=0;i!==s;++i){const l=[i+t+1].concat(a);this.loacChild(e,o,l,(e=>{r.push(e),r.length===s&&n(r)}))}}}t.Cell=a,a.CELL_TYPENAME="cell"},335:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDef=void 0;const n=s(913),r=s(851),i=s(924);class a extends i.Variable{constructor(e="",t=[]){super(),this.setFullname(e),this._value=t.join(n.FIELDS_SEPARATOR),this._fields=t,this._numberOfChildren=this._fields.length,0!==this._numberOfChildren&&(this._children=new Array,r.Variables.addReferenceTo(this))}typename(){return"object"}extendedTypename(){return this.typename()}loads(e){return e===this.typename()}createConcreteType(e,t){return new a(e,t)}loadNew(e,t,s,n){a.getProperties(e,s,(t=>{const s=this.createConcreteType(e,t);n(s)}))}listChildren(e,t,s,n){const i=this;this._fields.forEach((a=>{r.Variables.loadVariable(a,e,(e=>{i._children.push(e),i._children.length===i._numberOfChildren&&n(i._children.slice(t,t+s))}))}))}static getProperties(e,t,s){let n=new Array;t.evaluateAsLine(`properties(${e})`,(t=>{(t=t.replace(/properties for class .+:/,"")).split(/\s+/).filter((e=>e)).forEach((t=>{n.push(`${e}.${t}`)})),s(n)}))}}t.ClassDef=a},304:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComplexDiagonalMatrix=void 0;const n=s(13);class r extends n.Matrix{constructor(e="",t="",s=[],n=[],i=!0,a=r.TYPENAME){super(e,t,s,n,i,a)}typename(){return`complex ${r.TYPENAME}`}createConcreteType(e,t,s,n,i){return new r(e,t,s,n,i)}}t.ComplexDiagonalMatrix=r,r.TYPENAME="diagonal matrix"},88:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Function=void 0;const n=s(851),r=s(924);class i extends r.Variable{constructor(e="",t="",s=i.BASE_TYPE){super(),this._typename=i.BASE_TYPE,this.setFullname(e),this._value=t,this._typename=s}typename(){return this._typename}loads(e){return e.includes(this.typename())}extendedTypename(){return this.typename()}createConcreteType(e,t,s){return new i(e,t,s)}loadNew(e,t,s,r){n.Variables.getValue(e,s,(s=>{r(this.createConcreteType(e,s,t))}))}listChildren(e,t,s,n){}}t.Function=i,i.BASE_TYPE="function"},292:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyIndex=void 0;const n=s(13);class r extends n.Matrix{constructor(e="",t="",s=[],n=[],r=!0){super(e,t,s,n,r)}typename(){return"lazy_index"}createConcreteType(e,t,s,n,i){return new r(e,t,s,n,i)}}t.LazyIndex=r},13:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;const n=s(924),r=s(851),i=s(913),a=s(441),o=s(214);class l extends n.Variable{constructor(e="",t="",s=[],n=[],r=!0,i=l.MATRIX_TYPENAME){super(),this._typeRegex=new RegExp(i,"i"),this.setBasename(e),this._typename=i,this.setIndices(s,n),this.setValue(t,r)}static cleanComplex(e){return e.replace(/(?:\s+([\+\-])\s+)/g,"$1")}numberOfFixableIndices(e){let t=0;if(0!==e.length)for(let s=e.length-1;-1!=s&&1===e[s];--s)++t;return t}fixIndices(e,t){let s=this.numberOfFixableIndices(e);return 0!==s&&(e=e.slice(0,e.length-s),t=Array(s).fill(1).concat(t)),{free:e,fixed:t}}setIndices(e,t){const s=this.fixIndices(e,t);if(this._freeIndices=s.free,this._fixedIndices=s.fixed,this.setIndexing(this.makeIndexing(this._freeIndices,this._fixedIndices)),0!==this._freeIndices.length){this._numberOfChildren=this._freeIndices[this._freeIndices.length-1],0!==this._numberOfChildren&&r.Variables.addReferenceTo(this);const e=l.getSizeString(this._freeIndices);this._extendedTypename=`${this.typename()} ${e}`}}static getSizeString(e){return 1===e.length?`${e}${i.SIZE_SEPARATOR}1`:e.join(i.SIZE_SEPARATOR)}setValue(e,t){this._validValue=t,t&&(e=e.replace(this._typeRegex,"").replace(/\n\s+/g,"\n").trim(),this.isComplex()&&(e=o.MatrixParser.cleanComplex(e))),this._value=e}typename(){return this._typename}extendedTypename(){return this._extendedTypename}fixedIndices(){return this._fixedIndices}freeIndices(){return this._freeIndices}loads(e){return e.endsWith(this.typename())}isComplex(){return this.typename().includes("complex")}createConcreteType(e,t,s,n,r,i){return new l(e,t,s,n,r,i)}createChildType(e,t,s,n){return new l(this.basename(),e,t,s,n,this.typename())}loadNew(e,t,s,n){r.Variables.getSize(e,s,(i=>{const a=r.Variables.loadable(i),o=s=>{const r=this.createConcreteType(e,s,i,[],a,t);n(r)};a?r.Variables.getValue(e,s,o):o(l.getSizeString(i))}))}listChildren(e,t,s,n){if(0===this._numberOfChildren)throw"Error: matrix has no children!";0===s&&0===t&&(s=this._numberOfChildren);const r=new a.Interval(t,t+s),i=this;this.makeChildrenAvailable(e,r,(()=>{if(i._numberOfChildren!==i._children.length)throw`Error: listChildren ${i._numberOfChildren} !== ${i._children.length}!`;s===i._children.length?n(i._children):n(i._children.slice(t,t+s))}))}makeChildrenAvailable(e,t,s){const n=this;if(this._validValue)this._parsedValue?s():this.parseAllChildren((e=>{n._children=e,s()}));else{const n=this.unavailableOverlappingRanges(t);0!==n.length?this.fetchRanges(n,e,s):s()}}fetchRanges(e,t,s){let n=0;const r=this;e.forEach((i=>{this.fetchChildrenRange(i,t,(t=>{r.addChildrenFrom(i,t),++n,n===e.length&&s()}))}))}addChildrenFrom(e,t){if(void 0===this._children&&(this._children=new Array(this._numberOfChildren)),this._children.length<e.min()+t.length)throw`Matrix::addChildrenFrom dst ${this._children.length} < src ${e.min()} + ${t.length}`;for(let s=0;s!==t.length;++s)this._children[s+e.min()]=t[s];const s=Math.trunc(e.min()/i.CHUNKS_SIZE),n=Math.ceil(e.max()/i.CHUNKS_SIZE);for(let e=s;e!==n;++e)this._availableChildrenRange[e]=!0}unavailableOverlappingRanges(e){if(void 0===this._availableChildrenRange){const e=Math.ceil(this._numberOfChildren/i.CHUNKS_SIZE);this._availableChildrenRange=new Array(e)}const t=Math.trunc(e.min()/i.CHUNKS_SIZE),s=Math.ceil(e.max()/i.CHUNKS_SIZE);let n=new Array;for(let e=t;e!==s;++e)if(!this._availableChildrenRange[e]){const t=e*i.CHUNKS_SIZE,s=Math.min(t+i.CHUNKS_SIZE,this._numberOfChildren),r=new a.Interval(t,s);if(0!==n.length){const e=n[n.length-1];e.contigous(r)?e.expandWith(r):n.push(r)}else n.push(r)}return n}fetchChildrenRange(e,t,s){const n=e.min(),r=e.size();this.fetchChildren(t,n,r,s)}parseChildren(e,t,s,n){const r=this._freeIndices.length<=1?[]:this._freeIndices.slice(0,this._freeIndices.length-1),a=o.MatrixParser.parseMatrices(e,this.isComplex()),l=new Array(s);if(a.length>1)for(let e=0;e!==s;++e){const s=[e+t+1].concat(this._fixedIndices),n=a[e].value();l[e]=this.createChildType(n,r,s,!0)}else if(1===a.length&&a[0].size()>1){const e=a[0];for(let n=0;n!==s;++n){const s=[n+t+1].concat(this._fixedIndices),a=e.vector(n).join(i.COLUMN_ELEMENTS_SEPARATOR);l[n]=this.createChildType(a,r,s,!0)}}else if(1===a.length&&1===a[0].size()){const e=a[0].vector(0);for(let n=0;n!==s;++n){const s=[n+t+1].concat(this._fixedIndices);l[n]=this.createChildType(e[n],r,s,!0)}}n(l)}parseAllChildren(e){const t=this._value;if(this._freeIndices.length<1)throw`freeIndices.length: ${this._freeIndices.length}, expected >= 1!`;const s=this._freeIndices[this._freeIndices.length-1],n=this;this.parseChildren(t,0,s,(t=>{n._parsedValue=!0,e(t)}))}fetchChildren(e,t,s,n){if(0===this._freeIndices.length)throw`fetchChildren::freeIndices.length: ${this._freeIndices.length} === 0`;const i=this._freeIndices.slice(0,this._freeIndices.length-1);if(r.Variables.loadable(i,s))this.loadChildrenRange(e,t,s,n);else{const e=l.getSizeString(i),r=new Array(s);for(let n=0;n!==s;++n){const s=[t+n+1].concat(this._fixedIndices);r[n]=this.createChildType(e,i,s,!1)}n(r)}}loadChildrenRange(e,t,s,n){const i=this.makeRangeName(t,s);r.Variables.getValue(i,e,(e=>{e=e.replace(this._typeRegex,"").trim(),this.parseChildren(e,t,s,n)}))}fetchAllChildren(e,t){const s=this._freeIndices[this._freeIndices.length-1];this.fetchChildren(e,0,s,t)}makeIndexing(e,t,s=i.DEFAULT_LEFT,n=i.DEFAULT_RIGHT){let r="",a="";return 0===t.length?"":(a=t.join(","),0!==e.length&&(r=":,".repeat(e.length)),`${s}${r}${a}${n}`)}makeRangeName(e,t){const s=this.basename(),n=this._freeIndices,r=this._fixedIndices;let i="",a="";return 0!==r.length&&(a=","+r.join(",")),0!==n.length&&(i=":,".repeat(n.length-1),i+=`${e+1}:${e+t}`),`${s}(${i}${a})`}}t.Matrix=l,l.MATRIX_TYPENAME="matrix"},177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixData=void 0;class s{constructor(e,t,s){this._indices=e,this._value=t,this._vectors=s}indices(){return this._indices}value(){return this._value}vector(e){return this._vectors[e]}size(){return this._vectors.length}transpose(){this._vectors=s.transpose(this._vectors)}static transpose(e){const t=e.length;if(0===t)return new Array;let s=e[0];const n=s.length,r=new Array(n);for(let e=0;e!==n;++e)r[e]=new Array(t),r[e][0]=s[e];for(let i=1;i!==t;++i){if(s=e[i],s.length!==n)throw`rowValues.length !== Ncols: ${s.length} !== ${n}`;for(let e=0;e!==n;++e)r[e][i]=s[e]}return r}}t.MatrixData=s},214:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixParser=void 0;const n=s(177);class r{static cleanComplex(e){return e.replace(/(?:\s+([\+\-])\s+)/g,"$1")}static split(e,t){return e=e.trim(),t&&(e=r.cleanComplex(e)),e.split(" ").filter((e=>e))}static parseMatrixData(e,t){const s=/Columns? \d+(?: ((?:through)|(?:and)?) \d+)?:/,i=e.trim().split("\n").filter((e=>e)),a=i.length;let o=new Array;if(s.test(i[0])){let e=1;for(;e!==a&&!s.test(i[e]);++e)o.push(r.split(i[e],t));e!==a&&++e;for(let n=0;e!==a;++e)s.test(i[e])?n=0:Array.prototype.push.apply(o[n++],r.split(i[e],t))}else for(let e=0;e!==a;++e)o.push(r.split(i[e],t));return n.MatrixData.transpose(o)}static parseMultipleMatrices(e,t){const s=/\s*ans(\([^\)]+\)) =\s+([^]+?)\s+(ans\([^]+)/,i=new Array;let a=e,o=a.match(s);for(;null!==o&&4===o.length;){const e=o[1],l=o[2];a=o[3],i.push(new n.MatrixData(e,l,r.parseMatrixData(l,t))),o=a.match(s)}if(o=a.match(/\s*ans(\([^\)]+\)) =\s+([^]+)/),null!==o&&3===o.length){const e=o[1],s=o[2];i.push(new n.MatrixData(e,s,r.parseMatrixData(s,t)))}return i}static parseMatrices(e,t){if(/\s*ans\([^\)]+\) =/.test(e))return r.parseMultipleMatrices(e,t);const s=new Array;return s.push(new n.MatrixData("",e,r.parseMatrixData(e,t))),s}}t.MatrixParser=r},283:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Range=void 0;const n=s(13);class r extends n.Matrix{constructor(e="",t="",s=[],n=[],r=!0){super(e,t,s,n,r)}typename(){return"range"}createConcreteType(e,t,s,n,i){return new r(e,t,s,n,i)}}t.Range=r},956:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scalar=void 0;const n=s(851),r=s(924);class i extends r.Variable{constructor(e="",t="",s=i.BASE_TYPE){super(),this._typename=i.BASE_TYPE,this.setFullname(e),this._value=t,this._typename=s}typename(){return this._typename}extendedTypename(){return this.typename()}loads(e){return e.endsWith(this.typename())}createConcreteType(e,t,s){return new i(e,t,s)}loadNew(e,t,s,r){n.Variables.getValue(e,s,(s=>{r(this.createConcreteType(e,s,t))}))}listChildren(e,t,s,n){}}t.Scalar=i,i.BASE_TYPE="scalar"},961:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarStruct=void 0;const n=s(913),r=s(851),i=s(924);class a extends i.Variable{constructor(e="",t=[]){super(),this.setFullname(e),this._value=t.join(n.FIELDS_SEPARATOR),this._fields=t,this._numberOfChildren=this._fields.length,0!==this._numberOfChildren&&(this._children=new Array,r.Variables.addReferenceTo(this))}typename(){return"scalar struct"}extendedTypename(){return this.typename()}loads(e){return e===this.typename()}createConcreteType(e,t){return new a(e,t)}loadNew(e,t,s,n){a.getFields(e,s,(t=>{const s=this.createConcreteType(e,t);n(s)}))}listChildren(e,t,s,n){const i=this;this._fields.forEach((a=>{r.Variables.loadVariable(a,e,(e=>{i._children.push(e),i._children.length===i._numberOfChildren&&n(i._children.slice(t,t+s))}))}))}static setSplitStyle(e){a.split=e?a.splitOctaveStyle:a.splitMatlabStyle}static getFields(e,t,s){let n=new Array;t.evaluateAsLine(`fieldnames(${e})`,(t=>{a.split(t).forEach((t=>{n.push(`${e}.${t}`)})),s(n)}))}static splitOctaveStyle(e){const t=(e=r.Variables.clean(e)).match(a.CLEAN_REGEX);null!==t&&2===t.length&&(e=t[1]);const s=e.split(a.FIELDS_REGEX);s.shift();for(let e=0;e!==s.length;++e){const t=s[e];(0===t.length||a.NON_WORD_REGEX.test(t))&&(s[e]=`('${t}')`)}return s}static splitMatlabStyle(e){const t=(e=r.Variables.clean(e)).match(a.CLEAN_REGEX);null!==t&&2===t.length&&(e=t[1]);let s=e.split(a.FIELDS_REGEX);return s.shift(),s=s.filter((e=>0!==e.length&&a.FIELD_REGEX.test(e))),s}}t.ScalarStruct=a,a.split=a.splitMatlabStyle,a.CLEAN_REGEX=/^\{\n((?:.*|\s*)*)\n\}$/,a.FIELDS_REGEX=/\n?  \[\d+,1\] = /,a.NON_WORD_REGEX=/\W/,a.FIELD_REGEX=/^[a-zA-Z]\w*$/},42:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scope=void 0;const n=s(851),r=s(924);class i extends r.Variable{constructor(e){super(),this.setFullname(e),n.Variables.addReferenceTo(this)}typename(){return"scope"}extendedTypename(){return this.typename()}loads(e){return!1}loadNew(e,t,s,n){}listChildren(e,t,s,r){let a=!1,o="";e.evaluate(`who ${this.name()}`,(t=>{if(t.forEach((e=>{a?o+=" "+e:i.HEADER_REGEX.test(e)&&(a=!0)})),0!==o.length){const t=o.trim().split(i.SPACE_REGEX).sort();n.Variables.listVariables(t,e,r)}else r(new Array)}))}}t.Scope=i,i.HEADER_REGEX=/^\s*Variables .* the current scope:$/,i.SPACE_REGEX=/\s+/},77:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SparseMatrix=void 0;const n=s(913),r=s(851),i=s(13);class a extends i.Matrix{constructor(e="",t="",s=[],n=[],r=!0,i=a.TYPENAME){super(e,t,s,n,r,i),this._indices=new Array(this._numberOfChildren)}indices(){return this._indices}loads(e){return a.TYPENAME_REGEX.test(e)}createConcreteType(e,t,s,n,r,i){return new a(e,t,s,n,r,i)}loadNew(e,t,s,i){r.Variables.getNonZero(e,s,(a=>{const o=[a],l=r.Variables.loadable(o),c=n=>{const r=this.createConcreteType(e,n,o,[],l,t);l?r.fetchIndices(s,0,0,(()=>{i(r)})):i(r)};l?r.Variables.getValue(e,s,c):c(o.join(n.SIZE_SEPARATOR))}))}fetchChildren(e,t,s,n){this.fetchIndices(e,t,s,(r=>{const i=1+t,a=i+s-1,o=`${this.name()}(find(${this.name()})(${i}:${a}))`;e.evaluateAsLine(o,(e=>{this.parseChildren(e,t,s,(e=>{n(e)}))}))}))}fetchIndices(e,t,s,n){0===s&&0===s&&(s=this._numberOfChildren);const i=1+t,a=i+s-1,o=`find(${this.name()})(${i}:${a})`;e.evaluateAsLine(o,(e=>{const s=(e=r.Variables.clean(e)).split("\n").map((e=>parseInt(e)));for(let e=0;e!==s.length;++e)this._indices[t+e]=s[e];n(s)}))}parseChildren(e,t,s,n){const r=[],i=new Array(s),o=a.extractValues(e);if(o.length!==s)throw`values.length: ${o.length} != ${s}!`;for(let e=0;e!==s;++e){const s=[this._indices[e+t]],n=this.basename(),a=""+o[e];i[e]=this.createConcreteType(n,a,r,s,!0,this.typename())}n(i)}static extractValues(e){const t=e.split("\n"),s=new Array;return t.forEach((e=>{const t=e.match(a.VALUES_REGEX);if(null!==t&&2===t.length){const e=t[1];s.push(e)}})),s}}t.SparseMatrix=a,a.TYPENAME_PREFIX="sparse",a.TYPENAME_SUFFIX="matrix",a.TYPENAME=`${a.TYPENAME_PREFIX} ${a.TYPENAME_SUFFIX}`,a.TYPENAME_REGEX=new RegExp(`${a.TYPENAME_PREFIX} (?:\\w+ )?${a.TYPENAME_SUFFIX}`),a.VALUES_REGEX=/^\s*\(\d+,\s+\d+\)\s+->\s+(.+)$/},633:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.String=void 0;const n=s(913),r=s(851),i=s(924);class a extends i.Variable{constructor(e="",t="",s=!0,n=[],i=a.STR_TYPE){super(),this.setFullname(e),this._value=t,this._validValue=s,this._size=n,this._typename=i,this._numberOfChildren=0,0!==this._size.length&&(this.isLines()?this._numberOfChildren=this._size[0]:this._numberOfChildren=this._size[1],this.isChar()||r.Variables.addReferenceTo(this))}typename(){return this._typename}loads(e){return e===a.STR_TYPE||e===a.ESC_STR_TYPE}extendedTypename(){return this.typename()}createConcreteType(e,t,s,n,r){return new a(e,t,s,n,r)}loadNew(e,t,s,i){r.Variables.getSize(e,s,(a=>{const o=r.Variables.loadable(a),l=s=>{const n=this.createConcreteType(e,s,o,a,t);i(n)};o?r.Variables.getValue(e,s,l):l(a.join(n.SIZE_SEPARATOR))}))}listChildren(e,t,s,n){if(0===this._numberOfChildren)throw"Error: String has no children!";if(0===s&&0===t&&(s=this._numberOfChildren),void 0===this._children&&(this._children=new Array(this._numberOfChildren)),t+s>this._children.length)throw`Error: start+count > #children: ${t}+${s} > ${this._children.length}`;if(this.childrenNeedLoading(t,s))if(this._validValue)this.parseChildren(this._value,this._numberOfChildren,t,s,n);else{const i=this.childrenLength();r.Variables.loadable([1,1],i)?this.loadChildrenBlock(e,t,s,n):this.createChildrenPlaceholders(e,t,s,n)}}createChildrenPlaceholders(e,t,s,r){const i=this.name(),a=this.typename(),o=this.childrenLength(),l=[1,o],c=1===o?"":",:",h=l.join(n.SIZE_SEPARATOR);for(let e=0;e!==s;++e){const s=t+e+1,n=this.createConcreteType(`${i}(${s}${c})`,h,!1,l,a);this._children[t+e]=n}r(this._children.slice(t,t+s))}loadChildrenBlock(e,t,s,n){const i=this.name(),a=`${t+1}:${t+s}`;let o,l;this.isLine()?(o=`${i}(${a})`,l=r.Variables.ANS_AND_SPACE_REGEX):(o=`${i}(${a},:)`,l=r.Variables.ANS_AND_NEW_LINE_REGEX),r.Variables.getRawValue(o,e,(e=>{e=e.replace(l,""),this.parseChildren(e,s,t,s,n)}))}parseChildren(e,t,s,n,r){let i;const a=this.childrenLength();if(t*a>e.length||n>e.length)throw"String value is invalid";if(this.isLine())i=e.split("");else{i=new Array(t);for(let s=0,n=0;s!==t;++s)i[s]=e.substring(n,n+a),n+=a+1}const o=this.name(),l=this.typename(),c=[1,a],h=1===a?"":",:",u=i.length<s+n?0:s;for(let e=0;e!==n;++e){const t=i[u+e],n=s+e+1,r=this.createConcreteType(`${o}(${n}${h})`,t,!0,c,l);this._children[s+e]=r}r(this._children.slice(s,s+n))}childrenNeedLoading(e,t){return void 0!==this._children&&this._children.length>=e+t&&void 0===this._children[e]}isLine(){return 2===this._size.length&&1===this._size[0]&&this._size[1]>1}childrenLength(){return 2===this._size.length?1!==this._size[0]?this._size[1]:1:0}isChar(){return 2===this._size.length&&1===this._size[0]&&1===this._size[1]}isLines(){return 2===this._size.length&&this._size[0]>1}}t.String=a,a.STR_TYPE="string",a.ESC_STR_TYPE="sq_string"},697:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Struct=void 0;const n=s(961),r=s(913),i=s(851),a=s(13);class o extends a.Matrix{constructor(e="",t="",s=[],n=[]){super(e,t,s,n,!1,o.STRUCT_TYPENAME),this._fields=t.split(r.FIELDS_SEPARATOR)}static remove(e,t){const s=e.length;return t.map((e=>e.substr(s)))}typename(){return o.STRUCT_TYPENAME}loads(e){return e===this.typename()}createConcreteType(e,t,s,n,r,i){return new o(e,t,s,n)}loadNew(e,t,s,a){n.ScalarStruct.getFields(e,s,(n=>{const l=(n=o.remove(e,n)).join(r.FIELDS_SEPARATOR);i.Variables.getSize(e,s,(s=>{const n=this.createConcreteType(e,l,s,[],!1,t);a(n)}))}))}createChildType(e,t,s,r){let i;if(0===t.length){const e=this.basename()+this.makeIndexing(t,s),r=this._fields.map((t=>e+t));i=new n.ScalarStruct(e,r)}else i=this.createConcreteType(this.basename(),e,t,s,r,o.STRUCT_TYPENAME);return i}loadChildrenRange(e,t,s,n){const i=new Array(s),a=this.freeIndices(),o=this.fixedIndices(),l=a.slice(0,a.length-1),c=this._fields.join(r.FIELDS_SEPARATOR);for(let e=0;e!==s;++e){const s=[e+t+1].concat(o);i[e]=this.createChildType(c,l,s,!1)}n(i)}}t.Struct=o,o.STRUCT_TYPENAME="struct"},808:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownType=void 0;const n=s(913),r=s(851),i=s(924);class a extends i.Variable{constructor(e="",t="",s="",r=[]){super(),this._typename="UnknownType",this.setFullname(e),this._value=t,this._extendedTypename=`${this._typename}: ${s} ${r.join(n.SIZE_SEPARATOR)}`,this._typename=s,this._size=r}typename(){return this._typename}extendedTypename(){return this._extendedTypename}loads(e){return 0!==e.length}size(){return this._size}createConcreteType(e,t,s,n){return new a(e,t,s,n)}loadNew(e,t,s,i){r.Variables.getSize(e,s,(a=>{const o=s=>{const n=this.createConcreteType(e,s,t,a);i(n)};r.Variables.loadable(a)?r.Variables.getValue(e,s,o):o(a.join(n.SIZE_SEPARATOR))}))}listChildren(e,t,s,n){}}t.UnknownType=a},924:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;const n=s(913);t.Variable=class{constructor(){this._basename="",this._indexing="",this._value="",this._reference=0,this._namedVariables=0,this._numberOfChildren=0}setFullname(e){var t=e.indexOf(n.DEFAULT_LEFT);-1===t&&(t=e.indexOf(n.CELL_LEFT)),-1!==t?(this.setBasename(e.substring(0,t)),this.setIndexing(e.substring(t))):(this.setBasename(e),this.setIndexing(""))}setBasename(e){this._basename=e}setIndexing(e){this._indexing=e}basename(){return this._basename}indexing(){return this._indexing}name(){return this.basename()+this.indexing()}value(){return this._value}reference(){return this._reference}namedVariables(){return this._namedVariables}indexedVariables(){return this._numberOfChildren}setReference(e){this._reference=e}}},851:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variables=void 0;const n=s(602),r=s(913);class i{static setChunkPrefetch(e){e>0&&(i._CHUNKS_PREFETCH=e)}static getMaximumElementsPrefetch(){return i._CHUNKS_PREFETCH*r.CHUNKS_SIZE}static register(e){i._FACTORIES.push(e)}static registerFallback(e){i._FALLBACK=e}static getReference(e){for(let t=0;t!=i._REFS.length;++t){const s=i._REFS[t];if(s.name()==e)return s.reference()}return 0}static addReferenceTo(e){e.setReference(i._REFS.length+1),i._REFS.push(e)}static getByReference(e){if(e>0){const t=e-1;if(t<i._REFS.length)return i._REFS[t]}else n.OctaveLogger.error(`Error: getVariable(${e})!`);return null}static clearReferences(){i._REFS.length=0}static listByReference(e,t,s,r,a){const o=i.getByReference(e);null!==o?o.listChildren(t,s,r,a):(n.OctaveLogger.error(`Error: listByReference invalid reference ${e}`),a(i._EMPTY_ARRAY))}static skipVariable(e){return!i.evaluateAns&&"ans"===e}static listVariables(e,t,s){const r=new Array;let a=0;e.forEach((o=>{i.loadVariable(o,t,(t=>{null===t?(i.skipVariable(o)||n.OctaveLogger.error(`Error: could not load variable '${o}'!`),++a):r.push(t),r.length+a===e.length&&s(r)}))}))}static loadVariable(e,t,s){i.skipVariable(e)?s(null):i.getType(e,t,(n=>{for(let r=0;r!==i._FACTORIES.length;++r){const a=i._FACTORIES[r];if(a.loads(n))return void a.loadNew(e,n,t,s)}null!==i._FALLBACK&&i._FALLBACK.loads(n)?i._FALLBACK.loadNew(e,n,t,s):s(null)}))}static setVariable(e,t,s,n){s.evaluateAsLine(`${e} = ${t}`,(t=>{i.getValue(e,s,n)}))}static clean(e){return e.replace(i.ANS_AND_WHITE_SPACES_REGEX,"").trim()}static getType(e,t,s){t.evaluateAsLine(`typeinfo(${e})`,(e=>{s(i.clean(e))}))}static getValue(e,t,s){this.getRawValue(e,t,(t=>{s(i.removeName(e,t))}))}static getRawValue(e,t,s){t.evaluateAsLine(e,s)}static getSize(e,t,s){t.evaluateAsLine(`size(${e})`,(e=>{const t=i.clean(e).split(" ").filter((e=>e)).map((e=>parseInt(e)));s(t)}))}static getNonZero(e,t,s){t.evaluateAsLine(`nnz(${e})`,(e=>{s(parseInt(i.clean(e)))}))}static escape(e){return e.replace(i.ESCAPE_REGEX,"\\$&")}static removeName(e,t){return e=i.escape(e.trim()),(t=t.replace(new RegExp(`^\\s*(?:ans|${e}) =(?:\n\n)?\\s*`),"")).trim()}static loadable(e,t=0){return 0===t&&(t=1),e.reduce(((e,t)=>e*t),1)*t<=i.getMaximumElementsPrefetch()}}t.Variables=i,i._EMPTY_ARRAY=new Array,i._FACTORIES=new Array,i._REFS=new Array,i._CHUNKS_PREFETCH=r.CHUNKS_PREFETCH,i.evaluateAns=!1,i.ANS_AND_SPACE_REGEX=/^\s*ans =\s/,i.ANS_AND_NEW_LINE_REGEX=/^\s*ans =\n/,i.ANS_AND_WHITE_SPACES_REGEX=/^\s*ans =\s*/,i.ESCAPE_REGEX=/[.*+?^${}()|[\]\\]/g},379:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(646),r=s(998),i=s(278),a=s(16);t.Source=class{constructor(e,t,s=0,n,r){this.name=e,this.path=t,this.sourceReference=s,n&&(this.origin=n),r&&(this.adapterData=r)}},t.Scope=class{constructor(e,t,s=!1){this.name=e,this.variablesReference=t,this.expensive=s}},t.StackFrame=class{constructor(e,t,s,n=0,r=0){this.id=e,this.source=s,this.line=n,this.column=r,this.name=t}},t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}},t.Variable=class{constructor(e,t,s=0,n,r){this.name=e,this.value=t,this.variablesReference=s,"number"==typeof r&&(this.namedVariables=r),"number"==typeof n&&(this.indexedVariables=n)}},t.Breakpoint=class{constructor(e,t,s,n){this.verified=e;const r=this;"number"==typeof t&&(r.line=t),"number"==typeof s&&(r.column=s),n&&(r.source=n)}},t.Module=class{constructor(e,t){this.id=e,this.name=t}},t.CompletionItem=class{constructor(e,t,s=0){this.label=e,this.start=t,this.length=s}};class o extends r.Event{constructor(e,t,s){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof s&&(this.body.text=s)}}t.StoppedEvent=o;class l extends r.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=l;class c extends r.Event{constructor(){super("initialized")}}t.InitializedEvent=c;class h extends r.Event{constructor(e){super("terminated"),("boolean"==typeof e||e)&&(this.body={restart:e})}}t.TerminatedEvent=h;class u extends r.Event{constructor(e,t="console",s){super("output"),this.body={category:t,output:e},void 0!==s&&(this.body.data=s)}}t.OutputEvent=u;class d extends r.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=d;class p extends r.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=p;class _ extends r.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=_;class m extends r.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=m;class g extends r.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=g;class E extends r.Event{constructor(e,t,s){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof s&&(this.body.message=s)}}t.ProgressStartEvent=E;class b extends r.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=b;class R extends r.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}var f;t.ProgressEndEvent=R,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(f=t.ErrorDestination||(t.ErrorDestination={}));class v extends n.ProtocolServer{constructor(e,t){super();const s="boolean"==typeof e&&e;this._debuggerLinesStartAt1=s,this._debuggerColumnsStartAt1=s,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",(()=>{this.shutdown()})),this.on("error",(e=>{this.shutdown()}))}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){let t=0;if(process.argv.slice(2).forEach((function(e,s,n){const r=/^--server=(\d{4,5})$/.exec(e);r&&(t=parseInt(r[1],10))})),t>0)console.error(`waiting for debug protocol on port ${t}`),i.createServer((t=>{console.error(">> accepted connection from client"),t.on("end",(()=>{console.error(">> client connection closed\n")}));const s=new e(!1,!0);s.setRunAsServer(!0),s.start(t,t)})).listen(t);else{const t=new e(!1);process.on("SIGTERM",(()=>{t.shutdown()})),t.start(process.stdin,process.stdout)}}shutdown(){this._isServer||this._isRunningInline()||setTimeout((()=>{process.exit(0)}),100)}sendErrorResponse(e,t,s,n,r=f.User){let i;"number"==typeof t?(i={id:t,format:s},n&&(i.variables=n),r&f.User&&(i.showUser=!0),r&f.Telemetry&&(i.sendTelemetry=!0)):i=t,e.success=!1,e.message=v.formatPII(i.format,!0,i.variables),e.body||(e.body={}),e.body.error=i,this.sendResponse(e)}runInTerminalRequest(e,t,s){this.sendRequest("runInTerminal",e,t,s)}dispatchRequest(e){const t=new r.Response(e);try{if("initialize"===e.command){var s=e.arguments;if("boolean"==typeof s.linesStartAt1&&(this._clientLinesStartAt1=s.linesStartAt1),"boolean"==typeof s.columnsStartAt1&&(this._clientColumnsStartAt1=s.columnsStartAt1),"path"!==s.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,f.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,s)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},f.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,this.sendResponse(e)}disconnectRequest(e,t,s){this.sendResponse(e),this.shutdown()}launchRequest(e,t,s){this.sendResponse(e)}attachRequest(e,t,s){this.sendResponse(e)}terminateRequest(e,t,s){this.sendResponse(e)}restartRequest(e,t,s){this.sendResponse(e)}setBreakPointsRequest(e,t,s){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,s){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,s){this.sendResponse(e)}configurationDoneRequest(e,t,s){this.sendResponse(e)}continueRequest(e,t,s){this.sendResponse(e)}nextRequest(e,t,s){this.sendResponse(e)}stepInRequest(e,t,s){this.sendResponse(e)}stepOutRequest(e,t,s){this.sendResponse(e)}stepBackRequest(e,t,s){this.sendResponse(e)}reverseContinueRequest(e,t,s){this.sendResponse(e)}restartFrameRequest(e,t,s){this.sendResponse(e)}gotoRequest(e,t,s){this.sendResponse(e)}pauseRequest(e,t,s){this.sendResponse(e)}sourceRequest(e,t,s){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,s){this.sendResponse(e)}stackTraceRequest(e,t,s){this.sendResponse(e)}scopesRequest(e,t,s){this.sendResponse(e)}variablesRequest(e,t,s){this.sendResponse(e)}setVariableRequest(e,t,s){this.sendResponse(e)}setExpressionRequest(e,t,s){this.sendResponse(e)}evaluateRequest(e,t,s){this.sendResponse(e)}stepInTargetsRequest(e,t,s){this.sendResponse(e)}gotoTargetsRequest(e,t,s){this.sendResponse(e)}completionsRequest(e,t,s){this.sendResponse(e)}exceptionInfoRequest(e,t,s){this.sendResponse(e)}loadedSourcesRequest(e,t,s){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,s){this.sendResponse(e)}setDataBreakpointsRequest(e,t,s){this.sendResponse(e)}readMemoryRequest(e,t,s){this.sendResponse(e)}disassembleRequest(e,t,s){this.sendResponse(e)}cancelRequest(e,t,s){this.sendResponse(e)}breakpointLocationsRequest(e,t,s){this.sendResponse(e)}customRequest(e,t,s,n){this.sendErrorResponse(t,1014,"unrecognized request",null,f.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?v.uri2path(e):v.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?v.uri2path(e):v.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new a.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new a.URL(e),s=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(s)&&(s=s[1].toLowerCase()+s.substr(2)),s=s.replace(/\//g,"\\")),s}static formatPII(e,t,s){return e.replace(v._formatPIIRegexp,(function(e,n){return t&&n.length>0&&"_"!==n[0]?e:s[n]&&s.hasOwnProperty(n)?s[n]:e}))}}v._formatPIIRegexp=/{([^}]+)}/g,t.DebugSession=v},79:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},846:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?r(e.value):new s((function(t){t(e.value)})).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=s(896),i=s(928),a=s(480),o=s(379);var l;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(l=t.LogLevel||(t.LogLevel={}));class c{constructor(){this._pendingLogQ=[]}log(e,t=l.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,l.Verbose)}warn(e){this.log(e,l.Warn)}error(e){this.log(e,l.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=l.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,s=!0){const n="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:s};this._currentLogger.setup(t).then((()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach((e=>this._write(e.msg,e.level)))}}))}}init(e,t,s){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new h(e,s),this._logFilePathFromInit=t}}t.Logger=c,t.logger=new c;class h{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=l.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return n(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(i.isAbsolute(e.logFilePath)){const s=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,l.Error);try{yield(t=i.dirname(e.logFilePath),new Promise(((e,s)=>{a(t,(t=>{t?s(t):e()}))}))),this.log("Verbose logs are written to:\n",l.Warn),this.log(e.logFilePath+"\n",l.Warn),this._logFileStream=r.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",(e=>{s(e)}))}catch(e){s(e)}}else this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,l.Error);var t}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+p();this.log(t+"\n",l.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise((e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()}))}log(e,t,s=!0){if(this._minLogLevel!==l.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const s=t===l.Error?console.error:t===l.Warn?console.warn:null;s&&s(d(e))}t===l.Error&&(e=`[${l[t]}] ${e}`),this._prependTimestamp&&s&&(e="["+p()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const s=new u(e,t);this._logCallback(s)}}}class u extends o.OutputEvent{constructor(e,t){super(e,t===l.Error?"stderr":t===l.Warn?"console":"stdout")}}function d(e){return e.replace(/(\n|\r\n)$/,"")}function p(){let e=new Date;return _(2,String(e.getUTCHours()))+":"+_(2,String(e.getUTCMinutes()))+":"+_(2,String(e.getUTCSeconds()))+"."+_(3,String(e.getUTCMilliseconds()))+" UTC"}function _(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.LogOutputEvent=u,t.trimLastNewline=d},432:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(846),r=n.logger,i=s(379);class a extends i.DebugSession{constructor(e,t,s){super(t,s),this.obsolete_logFilePath=e,this.on("error",(e=>{r.error(e.body)}))}start(e,t){super.start(e,t),r.init((e=>this.sendEvent(e)),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof n.LogOutputEvent)){let t=e;e instanceof i.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign({},e.body,{output:"<output not logged>"})),r.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,s,n){r.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${s}`),super.sendRequest(e,t,s,n)}sendResponse(e){r.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){r.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=a},63:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(379);t.DebugSession=n.DebugSession,t.InitializedEvent=n.InitializedEvent,t.TerminatedEvent=n.TerminatedEvent,t.StoppedEvent=n.StoppedEvent,t.ContinuedEvent=n.ContinuedEvent,t.OutputEvent=n.OutputEvent,t.ThreadEvent=n.ThreadEvent,t.BreakpointEvent=n.BreakpointEvent,t.ModuleEvent=n.ModuleEvent,t.LoadedSourceEvent=n.LoadedSourceEvent,t.CapabilitiesEvent=n.CapabilitiesEvent,t.ProgressStartEvent=n.ProgressStartEvent,t.ProgressUpdateEvent=n.ProgressUpdateEvent,t.ProgressEndEvent=n.ProgressEndEvent,t.Thread=n.Thread,t.StackFrame=n.StackFrame,t.Scope=n.Scope,t.Variable=n.Variable,t.Breakpoint=n.Breakpoint,t.Source=n.Source,t.Module=n.Module,t.CompletionItem=n.CompletionItem,t.ErrorDestination=n.ErrorDestination;const r=s(432);t.LoggingDebugSession=r.LoggingDebugSession;const i=s(846);t.Logger=i;const a=s(998);t.Event=a.Event,t.Response=a.Response;const o=s(79);t.Handles=o.Handles;const l=i.logger;t.logger=l},998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){this.seq=0,this.type=e}}t.Message=s,t.Response=class extends s{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}},t.Event=class extends s{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},646:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(434),r=s(998);class i{get event(){return this._event||(this._event=(e,t)=>{let s;return this._listener=e,this._this=t,s={dispose:()=>{this._listener=void 0,this._this=void 0}},s}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class a extends n.EventEmitter{constructor(){super(),this._sendMessage=new i,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,s=this._pendingRequests.get(t.request_seq);s&&(this._pendingRequests.delete(t.request_seq),s(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=new Buffer(0),e.on("data",(e=>this._handleData(e))),e.on("close",(()=>{this._emitEvent(new r.Event("close"))})),e.on("error",(e=>{this._emitEvent(new r.Event("error","inStream error: "+(e&&e.message)))})),t.on("error",(e=>{this._emitEvent(new r.Event("error","outStream error: "+(e&&e.message)))})),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,s,n){const i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),n){this._pendingRequests.set(i.seq,n);const e=setTimeout((()=>{clearTimeout(e);const t=this._pendingRequests.get(i.seq);t&&(this._pendingRequests.delete(i.seq),t(new r.Response(i,"timeout")))}),s)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new r.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(a.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const s=t[e].split(/: +/);"Content-Length"==s[0]&&(this._contentLength=+s[1])}this._rawData=this._rawData.slice(e+a.TWO_CRLF.length);continue}}break}}}a.TWO_CRLF="\r\n\r\n",t.ProtocolServer=a},317:e=>{"use strict";e.exports=require("child_process")},434:e=>{"use strict";e.exports=require("events")},896:e=>{"use strict";e.exports=require("fs")},278:e=>{"use strict";e.exports=require("net")},928:e=>{"use strict";e.exports=require("path")},785:e=>{"use strict";e.exports=require("readline")},16:e=>{"use strict";e.exports=require("url")}},t={},s=function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,s),i.exports}(861);module.exports=s})();
//# sourceMappingURL=OctaveDebugger.js.map